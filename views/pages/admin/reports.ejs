<%- include('../../partials/header') %>

<style>
    /* Using some existing table styles and adding new ones */
    .report-table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 1.5rem;
        font-size: 0.9rem;
    }
    .report-table th, .report-table td {
        padding: 10px 12px;
        border: 1px solid var(--light-grey);
        text-align: left;
    }
    .report-table thead { background-color: #3d2f0b; } /* Darker gold for admin header */
    .report-table tbody tr:hover { background-color: var(--light-grey); }
    .status-open { color: #ffadad; /* light red */ }
    .status-resolved { color: #b0ffb0; /* light green */ }
</style>

<div class="container">
    <div class="profile-header">
        <h1>Admin Dashboard</h1>
        <p>File Report Management</p>
    </div>

    <section class="reports-list">
        <h2>Submitted Reports</h2>
        <% if(reports && reports.length > 0) { %>
            <table class="report-table">
                <thead>
                    <tr>
                        <th>Status</th>
                        <th>Reported File</th>
                        <th>Reason</th>
                        <th>Comments</th>
                        <th>Reported By</th>
                        <th>Date</th>
                    </tr>
                </thead>
                <tbody>
                    <% reports.forEach(report => { %>
                        <tr>
                            <td class="status-<%= report.status %>"><%= report.status.toUpperCase() %></td>
                            <td>
                                <!-- Using the populated file data -->
                                <a href="/mods/<%= report.file._id %>" target="_blank"><%= report.reportedFileName %></a>
                            </td>
                            <td><%= report.reason %></td>
                            <td><%= report.additionalComments || 'N/A' %></td>
                            <td>
                                <!-- Using the populated user data -->
                                <%= report.reportingUsername %>
                            </td>
                            <td><%= report.createdAt.toLocaleString() %></td>
                        </tr>
                    <% }) %>
                </tbody>
            </table>
        <% } else { %>
            <div class="no-uploads">
                <p>There are currently no open reports. Great job!</p>
            </div>
        <% } %>
    </section>
</div>

<%- include('../../partials/footer') %>